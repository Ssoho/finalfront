{"ast":null,"code":"import _slicedToArray from\"C:/\\uBC15\\uD604\\uD638/\\uD504\\uB85C\\uC81D\\uD2B8/react-jwt-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Navigate,useNavigate}from\"react-router-dom\";import AuthService from\"../services/auth.service\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(_ref){var logOut=_ref.logOut;var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),userReady=_useState2[0],setUserReady=_useState2[1];var _useState3=useState({username:\"\"}),_useState4=_slicedToArray(_useState3,2),currentUser=_useState4[0],setCurrentUser=_useState4[1];useEffect(function(){var currentUser=AuthService.getCurrentUser();if(!currentUser){navigate(\"/home\");}else{setCurrentUser(currentUser);setUserReady(true);}},[navigate]);var axiosConfig={headers:{'Content-Type':'application/json'}};var id=userReady?JSON.parse(localStorage.getItem('user')).id:null;var handleDeleteClick=function handleDeleteClick(){if(id){axios.delete(\"http://localhost:8080/api/user/delete/\".concat(id),axiosConfig).then(function(response){AuthService.logout();setCurrentUser(undefined);console.log(response);console.log(\"User information has been successfully deleted.\");logOut();navigate(\"/home\");}).catch(function(error){console.error(\"An error occurred while deleting user information.\",error);});}};var handleUpdateClick=function handleUpdateClick(){// 예제로 회원정보 변경 페이지로 이동하도록 설정\n// setRedirect(\"/\"); \n};// if (redirect) {\n//   return <Navigate to={redirect} />;\n// }\nif(!userReady){// Render a loading state while waiting for the user data to be ready\nreturn/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}// If there's no current user, we have already navigated to /home in useEffect.\n// So we don't need to render anything else here.\nif(!currentUser){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{margin:\"20px\",width:\"100%\"},children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:userReady?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"header\",{className:\"jumbotron\",children:/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid #ccc\",borderRadius:\"10px\",padding:\"40px\",width:\"600px\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:currentUser.profileImage||\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",alt:\"profile-img\",className:\"profile-img-card\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[currentUser.username,\"\\uB2D8 \\uD658\\uC601\\uD569\\uB2C8\\uB2E4!\"]}),/*#__PURE__*/_jsxs(\"p\",{style:{marginLeft:\"10px\",color:\"gray\"},children:[\" \",currentUser.email]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",gap:\"10px\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-profiler\",onClick:handleDeleteClick,children:\"\\uD68C\\uC6D0\\uC815\\uBCF4 \\uD0C8\\uD1F4\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{margin:\"10px 0\"},children:/*#__PURE__*/_jsx(\"hr\",{style:{border:\"1px solid #ccc\",width:\"100%\"}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD68C\\uC6D0\\uB2D8\\uC740\",/*#__PURE__*/_jsx(\"strong\",{children:\" \\uC77C\\uBC18\"}),\" \\uC720\\uC800\\uC785\\uB2C8\\uB2E4.\"]})})]})})}):null})});}export default Profile;","map":{"version":3,"names":["React","useEffect","useState","Navigate","useNavigate","AuthService","axios","jsx","_jsx","jsxs","_jsxs","Profile","_ref","logOut","navigate","_useState","_useState2","_slicedToArray","userReady","setUserReady","_useState3","username","_useState4","currentUser","setCurrentUser","getCurrentUser","axiosConfig","headers","id","JSON","parse","localStorage","getItem","handleDeleteClick","delete","concat","then","response","logout","undefined","console","log","catch","error","handleUpdateClick","children","className","style","margin","width","display","justifyContent","border","borderRadius","padding","alignItems","src","profileImage","alt","marginLeft","color","email","gap","onClick"],"sources":["C:/박현호/프로젝트/react-jwt-auth/src/components/profile.component.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Navigate, useNavigate } from \"react-router-dom\";\nimport AuthService from \"../services/auth.service\";\nimport axios from 'axios';\n\nfunction Profile({ logOut }) {\n  const navigate = useNavigate();\n  const [userReady, setUserReady] = useState(false);\n  const [currentUser, setCurrentUser] = useState({ username: \"\" });\n\n  useEffect(() => {\n    const currentUser = AuthService.getCurrentUser();\n\n    if (!currentUser) {\n      navigate(\"/home\");\n    } else {\n      setCurrentUser(currentUser);\n      setUserReady(true);\n    }\n  }, [navigate]);\n\n  const axiosConfig = {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n\n  const id = userReady ? JSON.parse(localStorage.getItem('user')).id : null;\n\n  const handleDeleteClick = () => {\n    if (id) {\n      axios.delete(`http://localhost:8080/api/user/delete/${id}`, axiosConfig)\n        .then((response) => {\n          AuthService.logout();\n          setCurrentUser(undefined);          \n          console.log(response);\n          console.log(\"User information has been successfully deleted.\");\n          logOut();\n          navigate(\"/home\");\n        })\n        .catch((error) => {\n          console.error(\"An error occurred while deleting user information.\", error);\n        });\n    }\n  };  \n\n  const handleUpdateClick = () => {\n    // 예제로 회원정보 변경 페이지로 이동하도록 설정\n    // setRedirect(\"/\"); \n  };\n\n  // if (redirect) {\n  //   return <Navigate to={redirect} />;\n  // }\n\n  if (!userReady) {\n    // Render a loading state while waiting for the user data to be ready\n    return <div>Loading...</div>;\n  }\n  \n  // If there's no current user, we have already navigated to /home in useEffect.\n  // So we don't need to render anything else here.\n  if (!currentUser) {\n    return null;\n  }  \n\n  return (\n    <div className=\"container\" style={{ margin: \"20px\", width: \"100%\" }}>\n      <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n      {userReady ? (\n        <div>\n          <header className=\"jumbotron\">\n            <div style={{ border: \"1px solid #ccc\", borderRadius: \"10px\", padding: \"40px\", width: \"600px\" }}>\n              <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                <div>\n                  <img\n                    src={currentUser.profileImage || \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"}\n                    alt=\"profile-img\"\n                    className=\"profile-img-card\"\n                  />\n                </div>\n                <div>\n                  <h4>{currentUser.username}님 환영합니다!</h4>\n                  <p style={{ marginLeft : \"10px\", color: \"gray\" }}>{\" \"}\n                    {currentUser.email}</p>\n                  <div style={{ display: \"flex\", gap: \"10px\" }}>\n                    {/* <button className=\"btn btn-profileg\" onClick={handleUpdateClick}>\n                      회원정보 변경\n                    </button> */}\n                    <button className=\"btn btn-profiler\" onClick={handleDeleteClick}>회원정보 탈퇴</button>\n                  </div>\n                </div>\n              </div>\n              <div style={{ margin: \"10px 0\" }}>\n                <hr style={{ border: \"1px solid #ccc\", width: \"100%\" }} />\n              </div>\n              <div>\n                <p>회원님은<strong> 일반</strong> 유저입니다.</p>\n              </div>\n            </div>\n          </header>\n          {/* <p>\n            <strong>Token:</strong>{\" \"}\n            {currentUser.accessToken.substring(0, 20)} ...{\" \"}\n            {currentUser.accessToken.substr(currentUser.accessToken.length - 20)}\n          </p>\n          <p>\n            <strong>Id:</strong>{\" \"}\n            {currentUser.id}\n          </p>\n          <strong>Authorities:</strong>\n          <ul>\n            {currentUser.roles &&\n              currentUser.roles.map((role, index) => <li key={index}>{role}</li>)}\n          </ul> */}\n        </div>\n      ) : null}\n    </div>\n    </div>\n  );\n}\n\nexport default Profile;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}