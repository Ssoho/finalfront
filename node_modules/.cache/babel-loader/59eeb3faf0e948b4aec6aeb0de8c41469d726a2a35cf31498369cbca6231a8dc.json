{"ast":null,"code":"import _regeneratorRuntime from\"C:/\\uBC15\\uD604\\uD638/\\uD504\\uB85C\\uC81D\\uD2B8/react-jwt-auth/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/\\uBC15\\uD604\\uD638/\\uD504\\uB85C\\uC81D\\uD2B8/react-jwt-auth/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/\\uBC15\\uD604\\uD638/\\uD504\\uB85C\\uC81D\\uD2B8/react-jwt-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from'axios';import'./home.css';import loading from'../common/loading.gif';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DCNresult(props){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),dcn=_useState2[0],setDcn=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),SelectedSongs=_useState4[0],setSelectedSongs=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),SelectedIds=_useState6[0],setSelectedIds=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedLyrics=_useState8[0],setSelectedLyrics=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),selectedTitle=_useState10[0],setSelectedTitle=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isModalVisible=_useState12[0],setIsModalVisible=_useState12[1];var userId=props.userId;var getResult=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:8080/api/dcn/recommend-songs2/\".concat(userId));case 3:response=_context.sent;// console.log(response.data)\nsetDcn(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function getResult(){return _ref.apply(this,arguments);};}();useEffect(function(){getResult();},[]);var handleSongClick=function handleSongClick(song){setSelectedSongs(function(prevSongs){var newSongs=new Set(prevSongs);// 이전 선택된 아이템 집합 복사\nnewSongs.add(song);return newSongs;});};var handleLyricClick=function handleLyricClick(index){setSelectedLyrics(dcn[index].lyric_Str);setSelectedTitle(dcn[index].songName);setIsModalVisible(true);};var closeModal=function closeModal(){setIsModalVisible(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"cent\",style:{margin:\"20px\",width:\"100%\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"table\",{className:\"td800\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{colSpan:\"4\",style:{textAlign:\"left\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"left\",fontSize:'18px'},children:\"DCN\\uBAA8\\uB378\\uC744 \\uAE30\\uBC18\\uC73C\\uB85C \\uCD94\\uCC9C\\uB4DC\\uB9BD\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'14px'},children:\"\\uD68C\\uC6D0\\uB2D8\\uC758 \\uC0AC\\uC774\\uD2B8 \\uC774\\uC6A9 \\uD328\\uD134\\uC744 \\uBD84\\uC11D\\uD558\\uC5EC \\uB525\\uB7EC\\uB2DD\\uC744 \\uC0AC\\uC6A9\\uD574 \\uB178\\uB798\\uB97C \\uCD94\\uCC9C\\uB4DC\\uB9BD\\uB2C8\\uB2E4.\"})]})}),dcn.length>0?dcn.map(function(song,index){return/*#__PURE__*/_jsxs(\"tr\",{style:{fontSize:\"16px\",textAlign:\"left\"},children:[/*#__PURE__*/_jsx(\"td\",{className:\"td400\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){return handleSongClick(song.songName);},alt:\"song\",src:song.url,width:\"50\",height:\"50\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"10px\"},children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return handleSongClick(song.songName);},children:song.songName}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return handleSongClick(song.songName);},style:{fontSize:\"10px\",textAlign:\"left\"},children:song.artistName})]})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"100px\",display:\"flex\",flexDirection:\"row\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"lyric-btn\",onClick:function onClick(){return handleLyricClick(index);},children:\"\\uAC00\\uC0AC\\uBCF4\\uAE30\"})})})]},index);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"img\",{style:{paddingLeft:'300px'},src:loading,alt:\"loading\"})})]})})}),isModalVisible&&selectedLyrics!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"lyric_modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title_container\",children:/*#__PURE__*/_jsx(\"h4\",{children:selectedTitle})}),/*#__PURE__*/_jsx(\"div\",{className:\"lyric_content\",dangerouslySetInnerHTML:{__html:selectedLyrics}}),/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,children:\"\\uB2EB\\uAE30\"})]})]});};export default DCNresult;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","loading","jsx","_jsx","jsxs","_jsxs","DCNresult","props","navigate","_useState","_useState2","_slicedToArray","dcn","setDcn","_useState3","_useState4","SelectedSongs","setSelectedSongs","_useState5","_useState6","SelectedIds","setSelectedIds","_useState7","_useState8","selectedLyrics","setSelectedLyrics","_useState9","_useState10","selectedTitle","setSelectedTitle","_useState11","_useState12","isModalVisible","setIsModalVisible","userId","getResult","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","sent","data","t0","console","log","stop","apply","arguments","handleSongClick","song","prevSongs","newSongs","Set","add","handleLyricClick","index","lyric_Str","songName","closeModal","className","style","margin","width","children","display","justifyContent","colSpan","textAlign","fontSize","length","map","flexDirection","onClick","alt","src","url","height","marginLeft","artistName","paddingLeft","dangerouslySetInnerHTML","__html"],"sources":["C:/박현호/프로젝트/react-jwt-auth/src/components/DCNresult.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport './home.css';\r\nimport loading from '../common/loading.gif';\r\n\r\nfunction DCNresult(props){\r\n  const navigate = useNavigate();\r\n\r\n  const [dcn, setDcn] = useState([]);\r\n  const [SelectedSongs, setSelectedSongs] = useState([]);  \r\n  const [SelectedIds, setSelectedIds] = useState([]);  \r\n  const [selectedLyrics, setSelectedLyrics] = useState(null);\r\n  const [selectedTitle, setSelectedTitle] = useState(null);\r\n  const [isModalVisible, setIsModalVisible] = useState(false);      \r\n\r\n\r\n  const userId = props.userId;    \r\n\r\n    const getResult = async() => {\r\n        try {\r\n          const response = await axios.get(`http://localhost:8080/api/dcn/recommend-songs2/${userId}`);\r\n            // console.log(response.data)\r\n            setDcn(response.data);\r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        getResult();\r\n      }, []);\r\n\r\n      const handleSongClick = (song) => {\r\n        setSelectedSongs((prevSongs) => {\r\n          const newSongs = new Set(prevSongs); // 이전 선택된 아이템 집합 복사\r\n            newSongs.add(song);\r\n          return newSongs;\r\n        });\r\n      };        \r\n\r\n      const handleLyricClick = (index) => {\r\n        setSelectedLyrics(dcn[index].lyric_Str);\r\n        setSelectedTitle(dcn[index].songName);\r\n        setIsModalVisible(true);\r\n      };      \r\n\r\n      const closeModal = () => {\r\n        setIsModalVisible(false);\r\n      };            \r\n\r\n      return (\r\n      \r\n        <div className=\"cent\" style={{ margin: \"20px\", width: \"100%\" }}>\r\n        \r\n        <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <table className=\"td800\">\r\n            <tbody>\r\n              <tr>\r\n                <td colSpan=\"4\" style={{ textAlign: \"left\" }}>\r\n                <p style={{ textAlign: \"left\" , fontSize : '18px'}} >\r\n                  DCN모델을 기반으로 추천드립니다\r\n                </p>\r\n                <p style={{fontSize : '14px'}}>\r\n                회원님의 사이트 이용 패턴을 분석하여 딥러닝을 사용해 노래를 추천드립니다.\r\n                </p>\r\n                {/* <p style={{fontSize : '14px', marginBottom : '0px'}}>\r\n                유저와 노래에 대한 특징을 임베딩하여 유저가 노래에 남긴 평점을 DCN(Deep & Cross Network)을 이용하여 학습시키고 \r\n                </p>\r\n                <p style={{fontSize : '14px'}}>\r\n                선택한 노래에 대해서 평점을 기반으로 학습한 결과를 이용해 추천합니다. \r\n                </p>                 */}\r\n                </td>\r\n              </tr>\r\n              {dcn.length > 0 ? (\r\n              dcn.map((song, index) => (\r\n                <tr key={index} style={{ fontSize: \"16px\", textAlign: \"left\" }}>\r\n                  <td className=\"td400\">\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                      <img\r\n                        onClick={() => handleSongClick(song.songName)}\r\n                        alt=\"song\"\r\n                        src={song.url}\r\n                        width=\"50\"\r\n                        height=\"50\"\r\n                      />\r\n                      <div style={{ marginLeft: \"10px\" }}>\r\n                        <span onClick={() => handleSongClick(song.songName)}>\r\n                          {song.songName}\r\n                        </span>\r\n                        <p\r\n                          onClick={() => handleSongClick(song.songName)}\r\n                          style={{ fontSize: \"10px\", textAlign: \"left\" }}\r\n                        >\r\n                          {song.artistName}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                  <div style={{ marginLeft : \"100px\", display: \"flex\", flexDirection: \"row\" }}>\r\n                    <button className = 'lyric-btn' onClick={() => handleLyricClick(index)} >\r\n                    가사보기\r\n                    </button>\r\n                  </div>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                  <img style ={{ paddingLeft : '300px' }} src = {loading} alt =\"loading\" />\r\n              </tr>\r\n            )}              \r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {isModalVisible && selectedLyrics !== null && (\r\n        <div className=\"lyric_modal\">\r\n          <div className=\"title_container\">\r\n            <h4>{selectedTitle}</h4>\r\n          </div>\r\n          <div className=\"lyric_content\" dangerouslySetInnerHTML={{ __html: selectedLyrics }} />\r\n          <button onClick={closeModal}>닫기</button>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n\r\n    );\r\n  };\r\n  \r\n  export default DCNresult;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}